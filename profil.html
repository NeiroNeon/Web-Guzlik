<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞ ‚Äî Guzlik Play</title>

<!-- Three.js + SkinView3D -->
<script src="https://unpkg.com/three@0.152.2/build/three.min.js"></script>
<script src="https://unpkg.com/skinview3d@3.1.0/bundles/skinview3d.bundle.js"></script>

<!-- Minecraft Rus -->
<link href="https://fonts.cdnfonts.com/css/minecraft-rus" rel="stylesheet">

<style>
/* ========== 40.html DESIGN TOKENS ========== */
:root{
  --mc-0:#000000; --mc-1:#0000AA; --mc-2:#00AA00; --mc-3:#00AAAA;
  --mc-4:#AA0000; --mc-5:#AA00AA; --mc-6:#FFAA00; --mc-7:#AAAAAA;
  --mc-8:#555555; --mc-9:#5555FF; --mc-a:#55FF55; --mc-b:#55FFFF;
  --mc-c:#FF5555; --mc-d:#FF55FF; --mc-e:#FFFF55; --mc-f:#FFFFFF;
  --bg:#FFD1DC; --spot:#FF517B; --card:rgba(255,255,255,.88);
  --text:#333; --muted:#666; --accent:#398119; --online:#398119;
  --radius:16px; --shadow:0 8px 32px rgba(0,0,0,.12)
}
body.dark{
  --bg:#1a1a1a; --spot:#ff3366; --card:rgba(30,30,30,.88);
  --text:#e0e0e0; --muted:#aaa; --accent:#4caf50; --online:#4caf50;
  --shadow:0 8px 32px rgba(0,0,0,.5)
}

/* ---------- –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ ---------- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body,button,input,select,textarea,h1,h2,h3,h4,h5,h6,a,small,span,div,p,li,td,th{
  font-family:'Minecraft Rus',sans-serif;
}
body{
  line-height:1.5;background:var(--bg);
  background-image: radial-gradient(circle at 20% 30%, var(--spot) 0%, transparent 25%),
                    radial-gradient(circle at 80% 70%, var(--spot) 0%, transparent 25%),
                    radial-gradient(circle at 50% 50%, var(--spot) 0%, transparent 20%);
  min-height:100vh;display:flex;flex-direction:column;color:var(--text);
  transition:background .3s,color .3s;
}

/* ---------- —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ ---------- */
.card{
  width:min(90vw, 420px);
  margin:auto;
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:1.5rem;
  display:flex;
  flex-direction:column;
  gap:1rem;
}

/* ---------- 3D-viewer –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ---------- */
#viewer{
  width:100%;
  height:420px;
  position:relative;
  border-radius:var(--radius);
  overflow:hidden;
}

/* ---------- –Ω–∏–∫ –ø–æ–≤–µ—Ä—Ö viewer (–∫–∞–∫ –≤ index.html) ---------- */
.nickname{
  position:absolute;
  top:25px;
  left:50%;
  transform:translateX(-50%);
  font-size:16px;
  color:#fff;
  background:rgba(0,0,0,.5);
  padding:3px 7px;
  white-space:nowrap;
  image-rendering:pixelated;
  text-shadow:2px 2px 0 #3f3f3f;
}

/* ---------- –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è ---------- */
.row{
  display:flex;
  justify-content:space-between;
  font-size:.9rem;
}
.row span:first-child{color:var(--muted)}
.row span:last-child{font-weight:600}

/* ---------- –∫–Ω–æ–ø–∫–∏ ---------- */
.controls{display:flex;gap:.5rem}
button{
  flex:1;
  height:44px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  color:#fff;
  font-size:1rem;
  cursor:pointer;
  transition:background .2s;
}
button:hover{background:#2a6010}
button:active{transform:scale(.95)}

/* ---------- –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã ---------- */
#themeToggle{
  position:fixed;
  top:1rem;
  right:1rem;
  width:44px;
  height:44px;
  border-radius:8px;
  background:var(--card);
  border:1px solid rgba(0,0,0,.1);
  box-shadow:var(--shadow);
  font-size:1.4rem;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* ---------- –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–≤–æ–¥–∞ –Ω–∏–∫–∞ ---------- */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.modal-content{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:2rem;
  width:min(90vw, 320px);
  display:flex;
  flex-direction:column;
  gap:1rem;
}
.modal-content h2{margin:0;text-align:center}
.modal-content input{
  width:100%;
  padding:.75rem;
  border-radius:8px;
  border:1px solid var(--muted);
  font-size:1rem;
}
.modal-content button{
  height:44px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  color:#fff;
  font-size:1rem;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- ===== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–í–û–î–ê –ù–ò–ö–ê ===== -->
<div id="nickModal" class="modal">
  <div class="modal-content">
    <h2>–í–≤–µ–¥–∏ —Å–≤–æ–π Minecraft –Ω–∏–∫</h2>
    <input id="nickInput" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: PurpleWizard" maxlength="16">
    <button id="nickSubmit">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</div>

<!-- ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ===== -->
<div id="mainContent" style="display:none;width:100%;height:100%">
  <div class="card">
    <!-- 3D-viewer -->
    <div id="viewer">
      <div class="nickname" id="nickname"></div>
    </div>

    <!-- –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="row"><span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span><span>12.12.2025</span></div>
    <div class="row"><span>–û–Ω–ª–∞–π–Ω</span><span>127 —á</span></div>
    <div class="row"><span>–ë–∞–ª–∞–Ω—Å</span><span>1 234 567 ‚ÇΩ</span></div>
    <div class="row"><span>–ö–ª–∞–Ω</span><span>–ü—ã–ª–∞—é—â–∏–π –§–µ–Ω–∏–∫—Å</span></div>
    <div class="row"><span>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span><span>–£–±–∏–ª –î—Ä–∞–∫–æ–Ω–∞ 12 —Ä–∞–∑</span></div>

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="controls">
      <button id="toHome">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
      <button id="toShop">–ú–∞–≥–∞–∑–∏–Ω</button>
    </div>
  </div>

  <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
  <button id="themeToggle" title="–¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞">üåô</button>
</div>

<script>
/* ---------- –≤–≤–æ–¥ –Ω–∏–∫–∞ ---------- */
const nickModal  = document.getElementById('nickModal');
const nickInput  = document.getElementById('nickInput');
const nickSubmit = document.getElementById('nickSubmit');
const mainContent = document.getElementById('mainContent');
const nicknameEl  = document.getElementById('nickname');

nickSubmit.onclick = () => {
  const nick = nickInput.value.trim();
  if(!nick){alert('–í–≤–µ–¥–∏ –Ω–∏–∫!');return;}
  localStorage.setItem('mcNick',nick);
  nicknameEl.textContent = nick;
  nickModal.style.display = 'none';
  mainContent.style.display = 'flex';
  loadSkin(nick);
};

window.onload = () => {
  const saved = localStorage.getItem('mcNick');
  if(saved){
    nicknameEl.textContent = saved;
    nickModal.style.display = 'none';
    mainContent.style.display = 'flex';
    loadSkin(saved);
  }else{
    nickInput.focus();
  }
};

function loadSkin(nick){
  skinViewer.loadSkin(`https://minotar.net/skin/${nick}/100.png`);
}

/* ---------- 3D-viewer (—Ç–æ—á–Ω—ã–π –∫–æ–¥ –∏–∑ index.html) ---------- */
const skinViewer = new skinview3d.SkinViewer({
  width:300,
  height:420,
  skin:"https://minotar.net/skin/Steve/100.png",
  fov:40,
  zoom:0.9
});

skinViewer.renderer.setPixelRatio(1);
skinViewer.renderer.antialias = false;
skinViewer.renderer.setClearAlpha(0);
skinViewer.scene.background = null;

skinViewer.controls.enableZoom = false;
skinViewer.controls.enablePan = false;
skinViewer.controls.enableRotate = true;
skinViewer.controls.autoRotate = true;
skinViewer.controls.autoRotateSpeed = 8;

skinViewer.playerObject.position.y = -0.15;

document.getElementById('viewer').appendChild(skinViewer.canvas);

/* –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç–∞ –ø—Ä–∏ —Ä—É—á–Ω–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ */
const viewerEl = document.getElementById('viewer');
viewerEl.addEventListener("pointerdown",()=>{
  skinViewer.controls.autoRotate = false;
});
viewerEl.addEventListener("pointerup",()=>{
  skinViewer.controls.autoRotate = true;
});

/* ---------- —Ç–µ–º–∞ ---------- */
const themeBtn = document.getElementById('themeToggle');
let dark = localStorage.getItem('dark')==='true';
function applyTheme(){
  document.body.classList.toggle('dark',dark);
  themeBtn.textContent = dark ? '‚òÄ' : 'üåô';
}
applyTheme();
themeBtn.addEventListener('click',()=>{
  dark=!dark; localStorage.setItem('dark',dark); applyTheme();
});

/* ---------- –Ω–∞–≤–∏–≥–∞—Ü–∏—è ---------- */
document.getElementById('toHome').onclick = () => location.href = '40.html';
document.getElementById('toShop').onclick  = () => location.href = '40.html#shop';
</script>

</body>
</html>

